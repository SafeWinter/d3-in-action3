# 1 An introduction to `D3.js`

# 第一章 `D3.js` 入门



本章要点

- 理解 `D3.js` 的定位及设计理念；
- 了解可与 `D3` 搭配使用的数据可视化工具；
- 用代码创建并设置 `SVG` 图形；
- 了解数据可视化最佳实践在 `D3` 开发过程中的支撑作用



`D3.js` 支持几乎所有最具创造力的、令人振奋的信息可视化展示。`D3` 即数据驱动文档的缩写（**Data-Driven Documents**），既是一个品牌的名称，也是网上以另一种形式提供的一类应用程序。`D3` 可用于构建各种各样的数据驱动项目：从简单的条形图到动态地图、再到对空间和时间的复杂效果探索。无论是研究构建原型、打造顶级科技公司全覆盖的数据仪表盘，还是绘制富有创意的 `Web` 滚动页面，当您希望在数据可视化上拥有完全的创意空间和技术自由时，`D3` 将是您的不二之选。



## 1.1 D3.js 是什么

`D3` 是由美国设计师 *Mike Bostock* 于 2011 年创建的、用于生成动态的、交互式 `Web` 端数据可视化效果的开源 `JavaScript` 工具库。尽管过去这些年涌现了大量新的可视化工具库，其底层往往用到的都是 `D3`。这是因为 `D3` 非常灵活且功能强大。



![every line in Hamilton](assets/1-1.png)

**图 1.1 汉密尔顿每句台词的交互式可视化展示效果（由 *Shirley Wu* 创建的 `D3` [可视化](https://pudding.cool/2017/03/hamilton))**



### 1.1.1 可在 Web 端访问的数据可视化需求

`D3.js` 的诞生是为了满足在 `Web` 端访问复杂的数据可视化的迫切需求。假如您的公司正在使用的商业智能工具无法提供团队需要的那种数据展示模式，这时就必须根据您的特定需求量身定制一个数据面板，来准确展示客户的行为模式。该面板要能快速响应、可供交互并且能在整个组织中共享数据。为此您需要选用 D3。

或者想象一下：您受命实现一个网页效果，旨在反映全球范围内 `LGBTQ` 的群体权力在过去几十年和演变情况。此页面包含许多随着页面滚动而切换的创意可视化展示效果，能通过鼠标事件显示更多的信息、并自动适应屏幕大小。`D3` 将是构建此类项目的首选工具。

*Mike Bostock* 创建 `D3` 的初衷，是为了利用新兴的 `Web` 标准，正如他所说：“避免专有的表现形式，并提供极致的灵活性，充分挖掘 `CSS3`、`HTML5` 和 `SVG` 等 `Web` 标准的所有潜力”（http://d3js.org)。 `D3.js` 第七版是目前这个热门工具库的最新版，通过模块化 `D3` 的各个组件，使其与 `ECMAScript` 模块和现代应用程序开发完全兼容，从而延续了这一流行趋势。

`D3.js` 使开发者不仅能制作出具有丰富交互效果的应用程序，而且也能像传统 `Web` 应用程序那样提供样式和服务。这使得它们的可移植性更强，更适合不断扩展；对于大型团队中不了解 `D3` 特定语法的其他成员而言，也能通过设置 `CSS` 样式，很方便地进行项目维护。



![map representation with D3](assets/1-2.png)

**图1.2 D3 开发者能接触到各类数据呈现方式，例如地图。这是 [Christophe Viau](https://christopheviau.com/) 绘制的地图效果**



*Bostock* 决定对数据进行最泛化的处理并创建一个通用工具库，使其展示出的地图效果，能够像展示图表、展示网络或者展示列表那样容易。这也意味着，开发者无需为了展示地图去单独了解具体某个库的抽象层及语法、为了实现动态文本效果再学习另一个库的语法、或者仅仅为了绘制传统图形再去学习相应的某个库。相反，用于实现交互式网络可视化效果的代码接近于纯 `JavaScript`，也类似于在 `D3` 地图上动态描点的代码。不仅方法相同，数据也可以相同，只是以一种方式表示网络的节点与链接，而以另一种方式表示地图上的地理空间罢了。

`D3` 不仅可以创建复杂多样的图形，还可以嵌入用户期望的高级交互，这对现代 `Web` 开发至关重要。使用 `D3`，每个图表的每个元素，从旋转的地球仪到饼状图的一部分，都以相同的方式进行交互。由于 `D3` 是由精通数据可视化实践的专家创建的，因此它涵盖了数据可视化和 `Web` 开发中众多标准的交互式组件和行为。



![network visualization](assets/1-3.png)

**图1.3 页面交互是 D3 的核心。该 [网络可视化效果](https://amdufour.github.io/organizations-against-polarization) 的鼠标事件交互揭示了不同组织之间的关系，以及特定于所选节点的信息**



### 1.1.2 何时使用 `D3.js`





### 1.1.3 `D3.js` 工作原理