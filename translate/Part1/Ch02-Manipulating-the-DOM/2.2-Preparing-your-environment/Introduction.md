## 2.2 环境准备

在开始使用 D3 之前，需要定好项目构建和运行的具体位置。可以使用在线代码编辑器，如 `Observable`（[https://observablehq.com](https://observablehq.com))）或 `CodePen`（[https://codepen.io](https://codepen.io)）。它们都非常适合快速测试及代码共享。但由于本书的主要目的是做足准备工作，以便后续将构建好的 D3 项目发布到网站或部署到 Web 应用中，因此我们选择搭建本地开发环境。

一听到搭建开发环境的您可曾心生畏惧？其实大可不必。过去那种花上半天工夫汗流浃背地搭建开发环境的日子早已一去不复返了。有了现代化的工具，首次搭建整个过程要不了几分钟就搞定了，之后只需点一下按钮就能运行项目。

您可能会问：为什么不能像第一章的 SVG 图形画廊那样，直接用浏览器打开 HTML 文件呢？虽然这么做有时也的确很不错，但最终会导致浏览器拒绝执行特定任务而出错。为了安全起见，有些浏览器会禁止通过 JavaScript 加载本地文件，转而要求通过 Web 服务器进行加载。D3 项目通常需要加载数据文件，因此必须搭一个 Web 服务器。

本书使用的代码编辑器是 VS Code。VS Code 经常和一个第三方的扩展插件 `Live Server` 搭配使用，后者就能提供一个本地 Web 服务器环境。不过，如果你已经有了自己喜欢的解决方案，可以直接跳转到第 2.2.1 小节。

> [!note]
>
> **注意**
>
> 本书第一部分中介绍的项目结构较为琐碎、略显土气。这样安排旨在让环境搭建尽可能简单，以专注于 D3 的学习。对于想要基于模块（module-based）来构建项目的高阶开发者，完全可以通过 `NPM`（Node Package Manager，即 Node 的包管理工具）来安装 D3 并将起导入文件，相关操作详见本书后续第 8 章第 8.2 小节。

VS Code 在开发人员中颇受欢迎。它不仅免费、开源、易用，且功能强大。VS Code 内置了 Git 命令（无需再单独打开一个命令行终端窗口）而且高度可定制。如果您还没有安装 VS Code，可以从 VS Code 网站 [https://code.visualstudio.com/Download](https://code.visualstudio.com/Download) 进行下载。安装成功后，再到 VS Code 的扩展市场安装 `Live Server` 插件。如需帮助，请参阅 **附录 A**。该附录介绍了如何通过 Live Server 扩展启动和停止本地 Web 服务器。

> [!note]
>
> **注意**
>
> 如果还没有下载本书源代码，请从随书 GitHub 仓库（[http://mng.bz/Xqjv](http://mng.bz/Xqjv)）进行下载。本章将使用本章代码文件的 `start` 文件夹。如果卡住了，需要查看解决方案，可以在对应的 `end` 文件夹进行查看。使用本章代码文件时，编辑器只需打开一个 `start` 或 `end` 文件夹即可；若同时打开所有文件、并通过 Live Server 建立 Web 服务，某些路径（例如将数据集加载到项目中）将无法正常工作。源代码文件按子章节（sections）进行组织，因此当进入本书某个新的子章节时，既可以在之前的源码环境中尝试学习，也可以从该章节对应的文件夹中重新开始。两种方案殊途同归。