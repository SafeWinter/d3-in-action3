## 3.6 本章小结

- 在数据可视化中，我们主要处理两种数据类型：定量型数据和定性型数据。定量型数据是数字信息，如体重或温度；而定性数据通常是文本信息，如国家名称或电影类型。
- 作为 D3 开发人员，我们需要处理不同格式的数据集。最常见的是表格格式，如 `CSV` 文件和 `JSON` 文件中的 `JavaScript` 对象；此外，数据也可以按照不同层次、网络结构或者地理信息可视化的特定方式进行组织。
- D3 提供了将特定格式的数据集加载到项目中的工具函数。例如，`d3.csv()` 和 `d3.json()` 函数可分别加载 `CSV` 与 `JSON` 格式文件。在加载数据时，D3 会将其转换为对象数组。
- 加载外部数据集时，我们通常需要确保数据（尤其是数值型数据）格式正确。`d3.csv()` 和 `d3.json()` 的回调函数可以逐行访问数据集，是执行类型转换和其他数据操作的理想场所。
- 数据加载是一个异步过程，这意味着加载时浏览器会继续读取与执行脚本：
  - 在操作数据前，必须等待数据完成加载。为此，可以使用 `JavaScript` 期约接口中的 `then()` 方法；
  - `then()` 方法的回调函数可在加载结束后访问整个数据集。然后，可以在构建可视化效果前进一步测量和重构数据。
- 数据绑定模式产生的 SVG 元素数量与数据（单个数据点或者表格数据集中的行）数量相同：
  - 数据绑定模式由三个链式调用的方法组成：`selectAll()`、`data()`、`join()`；
  - 使用数据绑定模式生成 SVG 元素后，就能通过内联函数（译注：inline functions，即访问器函数 accessor）访问与每个元素绑定的数据项。
  - 绑定到元素上的数据也会传递给它的后代元素。
- D3 比例尺能将数据集中的值转换为用于指定 SVG 元素样式的各类属性值，如尺寸大小、位置及颜色：
  - 根据输入输出值是离散型还是连续型，可以将 D3 比例尺分为四个系列；
  - 线性比例尺从连续型定义域获取输入，并从连续型值域中返回一个输出值。其输出与输入值成正比。线性比例尺广泛应用于 D3 项目，例如计算条形图中矩形元素的长度；
  - 分段比例尺从离散型定义域中获取输入，并从连续型值域中返回一个输出值。这类比例尺对于在条形图的可用空间内排布各矩形元素特别好用。
- 对 SVG 分组元素进行平移（translation）将影响其内部所有的后代元素。
- 标签由 SVG 文本元素（`text`）构建。每个文本元素必须使用 `x` 和 `y` 属性单独定位；还可以使用 `text-anchor` 属性（attribute）设置文本右对齐。